<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Profile</title>
    <style>
        .banner{
            background-image: url("https://images.unsplash.com/photo-1493238792000-8113da705763?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");
            height: 250px;
            background-size: cover;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }
        .tumb-nail{
            height: 45px;
            width: 45px;
            border-radius: 100%;
        }
        .pp {
            width: 200px;
            height: 200px;
            border: 3px solid white;
            border-radius: 100%;
            z-index: 0;
            object-fit: cover;

            margin-top: -100px;
            margin-left: 15px;
        }
    </style>
</head>
<body>
    <!-- header  -->
    <%- include('partials/header.ejs') %>
    <!-- content  -->
    <div class="container mt-4">
        <div class="card mb-3" style="border: none;">
                <div class="banner"></div>
                <img class="pp" src="<%= user.Profile.photoProfile %>" alt="photo_profile">
                <div class="card-body">
                  <h3 class="card-title"><%= user.Profile.asName %> </h3>
                  <p class="card-text"><small class="text-body-secondary"><%= user.Profile.gender %></small></p>
                  <p class="card-text"><small class="text-body-secondary"><%= user.Profile.bioProfile %></small></p>
                  <p class="card-text"><small class="text-body-secondary">Bergabung Sejak : <%= user.userDate %></small></p>
                  <a href="/post/edit"><button type="button" class="btn btn-outline-secondary btn-sm">Edit Profile</button></a>
                </div>
        </div>
        <div class="content" style="margin-top: 50px;">
            <h3>POSTINGAN</h3>
            <a href="/post">
                <button type="button" class="btn btn-outline-success mb-4">Tambahkan Postingan</button>
            </a>
                <% user.Posts.forEach(post => { %>
                  <div class="card mb-3">
                    <div class="card-body">
                      <div class="card">
                          <div class="card-header" style="display: flex;">
                            <img class="tumb-nail me-2" src="<%= user.Profile.photoProfile %>" alt="profile" class="me-2">
                            <p class="fw-bold" style="position: relative;top: 12px;"><%= user.Profile.userName %></p>
                          </div>
                          <div class="card-body">
                              <p class="card-title fw-bold"><%= post.title %></p>
                              <p class="card-text" style="margin-top: 15px; margin-bottom: 8px;"><%= post.descPost %></p>
                              <a href="/post/<%= post.id %>/delete"><button type="button" class="btn btn-outline-danger btn-sm">Delete Post</button></a>
                            </div>
                            <div class="card-body fw-bold" style="margin-top: -15px; display: flex;">
                                <p class="me-4"><a href="/post/<%= post.id %>/like">
                                    <button type="button" class="btn btn-outline-primary"
                                            style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    Like
                                    </button>
                                </a> : <%= post.likePost %></p>
                                <p class="me-4"><a href="/post/<%= post.id %>">
                                    <button type="button" class="btn btn-outline-success"
                                            style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    Comment
                                    </button>
                                </a> : <%= post.Comments.length %></p>
                            </div>
                      </div>
                    </div>
                  </div>
                <% }) %>
            </div>
        </div>
    </div>
</body>
</html>